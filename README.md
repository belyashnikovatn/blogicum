# Blogicum (django_sprint4)
Проект представляет собой прототип социальной сети для публикации личных дневников. На предыдущем этапе проекта были реализованы функции:
- вывод постов в виде ленты
- вывод конректного поста 
- страница для категории постов
- страница с описанием сети
- страница с правилами сети

На данном этапе реализованы модели:
- Post (Публикация)
- Category (Тематическая категория)
- Location (Географическая метка)
Загружены фикстуры из файла db.json.
Настроена админка (локализация, подключены модели, прописаны арибуты моделей и подсказки - согласно ТЗ).
Прописаны view для работы с данными из БД.

## Содержание
- [Технологии](#технологии)
- [Установка окружения](#установка-окружения)
- [Структура проекта](#структура-проекта)
- [Тестирование](#тестирование)
- [Развёртывание](#развёртывание)

## Технологии
Django, python, html, sqlite

## Установка окружения 
### Склонируйте проект «Blogicum» в свою рабочую папку.

Должна получиться такая структура:

```
Ваша рабочая папка
└── django_sprint1/
  ├── .vscode/    Служебная папка редактора кода (опционально, скрытая)
  ├── .git/       Служебная информация Git (скрытая)
  ├── html/       HTML-вёрстка для страниц и статика
  ├── tests/             Тесты Яндекс Практикума, проверяющие проект
  ├── blogicum/          Рабочая папка с кодом проекта
  ├── .flake8            Настройки тестов Практикума     
  ├── .gitignore         Список файлов и папок, которые не отслеживает Git 
  ├── LICENSE            Лицензия   
  ├── pytest.ini         Конфигурация тестов Практикума
  ├── README.md          Описание проекта 
  └── requirements.txt   Зависимости проекта
```

### Создайте виртуальное окружение

1. Запустите редактор Visual Studio Code и через меню «*Файл» / «Открыть директорию»* откройте свою рабочую папку. 
2. Запустите терминал в VS Code, удостоверьтесь, что вы работаете из директории *django_sprint1/* (если вы работаете под Windows, убедитесь, что в терминале запущен Git Bash, а не PowerShell или что-нибудь ещё), и выполните команду:
- Linux/macOS
    
    ```bash
    python3 -m venv venv
    ```
    
- Windows
    
    ```python
    python -m venv venv
    ```
   
В директории *django_sprint1/* будет развёрнуто виртуальное окружение и появится папка `venv`, в которой будут храниться все зависимости проекта, а структура файлов станет такой:

```
Ваша рабочая папка
└── django_sprint1/
  ├── .vscode/    Служебная папка редактора кода (опционально, скрытая)
  ├── .git/       Служебная информация Git (скрытая)
  ├── html/       HTML-вёрстка для страниц и статика
  ├── tests/             Тесты Яндекс Практикума, проверяющие проект
  ├── venv/              Виртуальное окружение
  ├── blogicum/          Рабочая папка с кодом проекта
  ├── .flake8            Настройки тестов Практикума     
  ├── .gitignore         Список файлов и папок, которые не отслеживает Git 
  ├── LICENSE            Лицензия   
  ├── pytest.ini         Конфигурация тестов Практикума
  ├── README.md          Описание проекта 
  └── requirements.txt   Зависимости проекта


```

### Активация виртуального окружения
в терминале перейдите в корневую директорию проекта *Ваша рабочая папка/django_sprint1/* и выполните команду:
- Linux/macOS
    
    ```bash
    source venv/bin/activate
    ```
    
- Windows
    
    ```bash
    source venv/Scripts/activate
    ```
    

Теперь все команды в терминале будут предваряться строкой `(venv)`.

ߒ`Все дальнейшие команды в терминале надо выполнять с активированным виртуальным окружением.

Обновите pip:

```bash
python -m pip install --upgrade pip
```

### Установка зависимостей из файла *requirements.txt*:
Находясь в папке *../django_sprint1/*, выполните команду:

```bash
pip install -r requirements.txt
```

### Применение миграций

    
В директории с файлом manage.py выполните команду: 

```bash
python manage.py migrate
```
Делала это 2 раза: после создания моделей, после изменения моделей.

### Запуск проекта в dev-режиме

    
В директории с файлом manage.py выполните команду: 

```bash
python manage.py runserver
```

В ответ Django сообщит, что сервер запущен и проект доступен по адресу [http://127.0.0.1:8000/](http://127.0.0.1:8000/). 

## Структура проекта
Созданы и зарегистрированы приложения:
- pages — для работы со статическими страницами проекта;
- blog — для работы с публикациями пользователей.
<br>Настроены маршруты и описаны представления на уровне приложений.
<br>Созданы шаблоны страниц на уровне проекта, подключена статика.
<br>Настроена админка.
<br>Прописаны модели, подключена БД sqlite.
<br>Написаны view функции.

## Тестирование
Для проверки кода создателями курса предусмотрены авто-тесты. Для их запуска из корневой папки нужно выполнить:
```
$ pytest
```

## Развёртывание

### Настройка контейнеризации
- Создан Dockerfile для backend, gateway, db 
- Созданы  docker-compose.yml и docker-compose.production.yml

|Имя образа	|Название контейнера|Название volume|
|:-------------:|:-------------:|:-------------:|
|postgres:13|db|pg_data_production|
|blogicum|blogicum|static_volume, media_volume| 
|gateway|gateway|static_volume, media_volume| 

### Настройка CI/CD
- Прописан workflow в main.yml:
    - проверка кода по PEP8 (push в любую ветку)
    - сбор образов и push на докерхаб (push в main ветку)
    - обновление образов на сервере и перезапуск приложения (push в main ветку)
- Изменены настройки nginx на удалённом сервере

## Зачем я сделала этот проект?
Продолжаю знакомство с фреймворком. Django - это какая-то магия! Очень здорово, что если что-то одно нужно изменить (модель, например), а вью или шаблоны уже реализованы, то нужно переделать только одно место, а не всё подряд. На этом проекте самов важное, что я усовила - это работа с ORM и db sqlite. 
Дополнительно прокачалась по теме CI/CD.


